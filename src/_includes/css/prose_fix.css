/* Workarounds, fixes, and tweaks for @tailwindcss/typography */
:is(:where(.prose *)) {
  /* Fix kbd like this: Fix style of kbd like <kbd><kbd>CTRL</kbd>+<kbd>ALT</kbd>+<kbd>Delete</kbd></kbd> */
  &:is(:where(kbd):not(:where([class~="not-prose"], [class~="not-prose"] *))) {
    font-family: var(--font-mono);
    &:where(:has(> kbd)) {
      --tw-border-style: none;
      border-style: none;
      --tw-shadow: 0 0 #0000;
      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow),
        var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
      @property --tw-shadow {
        syntax: "*";
        inherits: false;
        initial-value: 0 0 #0000;
      }
      @property --tw-shadow-color {
        syntax: "*";
        inherits: false;
      }
      @property --tw-shadow-alpha {
        syntax: "<percentage>";
        inherits: false;
        initial-value: 100%;
      }
      @property --tw-inset-shadow {
        syntax: "*";
        inherits: false;
        initial-value: 0 0 #0000;
      }
      @property --tw-inset-shadow-color {
        syntax: "*";
        inherits: false;
      }
      @property --tw-inset-shadow-alpha {
        syntax: "<percentage>";
        inherits: false;
        initial-value: 100%;
      }
      @property --tw-ring-color {
        syntax: "*";
        inherits: false;
      }
      @property --tw-ring-shadow {
        syntax: "*";
        inherits: false;
        initial-value: 0 0 #0000;
      }
      @property --tw-inset-ring-color {
        syntax: "*";
        inherits: false;
      }
      @property --tw-inset-ring-shadow {
        syntax: "*";
        inherits: false;
        initial-value: 0 0 #0000;
      }
      @property --tw-ring-inset {
        syntax: "*";
        inherits: false;
      }
      @property --tw-ring-offset-width {
        syntax: "<length>";
        inherits: false;
        initial-value: 0px;
      }
      @property --tw-ring-offset-color {
        syntax: "*";
        inherits: false;
        initial-value: #fff;
      }
      @property --tw-ring-offset-shadow {
        syntax: "*";
        inherits: false;
        initial-value: 0 0 #0000;
      }
    }
  }

  /* Delete the ::before and ::after content of the <blockquote> and remove the italics */
  &:is(
      :where(blockquote):not(
          :where([class~="not-prose"], [class~="not-prose"] *)
        )
    ) {
    font-style: normal;
    > :is(:where(*:first-child))::before,
    > :is(:where(*:last-child))::after {
      --tw-content: none;
      content: none;
    }
  }

  /* Fix for footnotes generated by remark-toc */
  &:is(
      :where(section.footnotes):not(
          :where([class~="not-prose"], [class~="not-prose"] *)
        )
    ) {
    margin-block: calc(var(--spacing) * 5);
    &:is(:where(&:first-child)) {
      margin-top: 0;
    }
    &:is(:where(&:last-child)) {
      margin-bottom: 0;
    }
    > :is(:where(ol)) {
      margin-block: calc(var(--spacing) * 5);
      > :is(:where(li)) {
        &:is(:where(&:first-child)) {
          margin-top: 0;
        }
        &:is(:where(&:last-child)) {
          margin-bottom: 0;
        }
        > :is(:where(*:first-child)) {
          margin-top: 0;
        }
        > :is(:where(*:last-child)) {
          margin-bottom: 0;
        }
      }
    }
  }

  /* Fix li margin */
  &:is(:where(li)) {
    &:first-child {
      margin-top: 0;
    }
    &:last-child {
      margin-bottom: 0;
    }
  }
}
